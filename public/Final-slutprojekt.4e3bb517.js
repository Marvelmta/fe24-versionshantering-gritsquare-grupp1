const e="https://fe24-vs-grupp1-slutprojekt-default-rtdb.europe-west1.firebasedatabase.app/.json",t=document.getElementById("sort");t.addEventListener("change",async()=>{console.log("test"),document.getElementById("messageDisplay").innerHTML="",o()});class n{constructor(e,t){this.name=e,this.message=t,this.timestamp=new Date().toLocaleString()}}async function a(){document.querySelectorAll(".message-item").forEach(e=>{setTimeout(()=>{e.classList.add("shake"),setTimeout(()=>{e.classList.remove("shake")},1e3)},500*Math.random())})}async function s(t){t.preventDefault();let a=document.querySelector("#name"),s=document.querySelector("#messageBoard"),r=a.value.trim(),l=s.value.trim(),c=document.querySelector(".birthdayDiv");if(c.style.display="none",!r||!l){alert("Provide both name and message");return}l.includes("my birthday")?(c.style.display="block",setTimeout(()=>{c.style.display="none"},2e3)):c.style.display="none";let i={method:"POST",body:JSON.stringify(new n(r,l)),headers:{"Content-Type":"application/json; charset=UTF-8"}};try{let t=await fetch(e,i);if(!t.ok)throw Error("Something went wrong when adding a message. Try again!");let n=await t.json();console.log("Message added:",n),o(),a.value="",s.value="",function(){let e=document.createElement("div");e.classList.add("notification"),e.textContent="Meddelandet har skickats!",document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}()}catch(e){console.error("Error:",e),alert("Could not add a message, try again!")}}async function o(){try{let n=await fetch(e);if(!n.ok)throw Error("Could not fetch messages");let s=await n.json(),o=s?Object.values(s):[],r=t.value;switch(console.log(r),r){case"alpha-asend":o.sort((e,t)=>t.name<e.name?-1:+(t.name>e.name));break;case"alpha-desend":o.sort((e,t)=>e.name<t.name?-1:+(e.name>t.name));break;case"message-length":o.sort((e,t)=>t.message.length<e.message.length?-1:+(t.message.length>e.message.length))}console.log(o),0===o.length?function(){let e=document.querySelector("#messageDisplay");if(!e){console.error("Error: #messageDisplay not found");return}e.innerHTML="<p>Inga meddelanden Ã¤n.</p>"}():(function(e){let t=document.querySelector("#messageDisplay");if(!t){console.error("Error: #messageDisplay not found");return}t.innerHTML="",e.forEach(e=>{let n=document.createElement("div");n.classList.add("message-item");let s=function(){let e=()=>Math.floor(156*Math.random())+100,t=e(),n=e(),a=e();50>Math.abs(t-n)&&(n=(n+100)%256),50>Math.abs(n-a)&&(a=(a+100)%256),50>Math.abs(a-t)&&(t=(t+100)%256);let s=`rgb(${t}, ${n}, ${a})`;return console.log(s),s}();n.style.backgroundColor=s,n.innerHTML=`
                <strong>${e.name}</strong> (${e.timestamp}) <br>
                ${e.message}
                <hr>
            `,t.prepend(n),a()})}(o),function(e){let t=document.querySelector("#motdDisplay");if(!t){console.error("MOTD container not found.");return}if(0===e.length){t.textContent="No messages yet.";return}let n=Math.floor(Math.random()*e.length),a=e[n];t.innerHTML=`
        <strong>${a.name}</strong> (${a.timestamp}) <br>
        "${a.message}"
    `}(o))}catch(e){console.error("Error fetching messages:",e)}}document.addEventListener("DOMContentLoaded",()=>{o();let e=document.querySelector("#submitButton");e?e.addEventListener("click",s):console.error("Error")});
//# sourceMappingURL=Final-slutprojekt.4e3bb517.js.map
